
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the CipherChat application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "username": {
          "type": "string",
          "description": "The username of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "username",
        "email"
      ]
    },
    "ChatMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ChatMessage",
      "type": "object",
      "description": "Represents a chat message within CipherChat.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the chat message."
        },
        "senderId": {
          "type": "string",
          "description": "The username of the User who sent the message."
        },
        "recipientId": {
          "type": "string",
          "description": "The username of the User who is the recipient of the message."
        },
        "senderUid": {
          "type": "string",
          "description": "The UID of the User who sent the message. (Relationship: User 1:N ChatMessage)"
        },
        "recipientUid": {
          "type": "string",
          "description": "The UID of the User who is the recipient of the message. (Relationship: User 1:N ChatMessage)"
        },
        "originalMessage": {
          "type": "string",
          "description": "The original, un-scrambled message text."
        },
        "scrambledMessage": {
          "type": "string",
          "description": "The scrambled version of the message."
        },
        "timestamp": {
          "type": "string",
          "description": "The date and time when the message was sent.",
          "format": "date-time"
        },
        "scrambleMethod": {
          "type": "string",
          "description": "The scrambling method used for this message (e.g., letter substitution, reverse)."
        }
      },
      "required": [
        "id",
        "senderId",
        "recipientId",
        "senderUid",
        "recipientUid",
        "originalMessage",
        "scrambledMessage",
        "timestamp",
        "scrambleMethod"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Data is public.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/messages/{messageId}",
        "definition": {
          "entityName": "ChatMessage",
          "schema": {
            "$ref": "#/backend/entities/ChatMessage"
          },
          "description": "Stores all chat messages. Data is public.",
          "params": [
            {
              "name": "messageId",
              "description": "The unique identifier for the chat message."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is simplified for a two-user prototype where strict security is not a requirement. All data in the 'users' and 'messages' collections are public to allow for easy reading and writing without complex authentication checks. This model is suitable for rapid prototyping but should be secured before moving to a production environment with more users."
  }
}

    